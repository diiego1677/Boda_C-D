<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boda de Carin & Diego | 21.02.2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Great+Vibes&family=Montserrat:wght@200;300;400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'wedding-olive': '#828C6A',
                        'wedding-sage': '#A0AB89',
                        'wedding-cream': '#F6E5E7',
                        'wedding-bone': '#FBF9F5',
                        'wedding-rose': '#EFC0BC',
                        'wedding-coral': '#E69B97',
                        'wedding-soft-coral': '#DFA8A4',
                        'wedding-gold': '#C7A35B',
                        'wedding-text': '#3D3630',
                        'wedding-earth': '#8B7E74',
                    },
                    fontFamily: {
                        'script': ['"Great Vibes"', 'cursive'],
                        'serif': ['"Cormorant Garamond"', 'serif'],
                        'sans': ['"Montserrat"', 'sans-serif'],
                    },
                    animation: {
                        'grand-entrance': 'grandEntrance 3.2s cubic-bezier(0.15, 1, 0.3, 1) forwards',
                        'fade-in-up': 'fadeInUp 1s ease-out forwards',
                        'heart-float': 'heartFloat 3s ease-out forwards',
                        'spin-slow': 'spin 8s linear infinite',
                    },
                    keyframes: {
                        grandEntrance: { '0%': { opacity: '0', transform: 'scale(1.5) translateY(-30px) rotateX(15deg)', filter: 'blur(15px)' }, '100%': { opacity: '1', transform: 'scale(1) translateY(0) rotateX(0deg)', filter: 'blur(0px)' } },
                        fadeInUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        heartFloat: { '0%': { opacity: '0', transform: 'translate(0, 0) scale(0)' }, '20%': { opacity: '1', transform: 'translate(var(--tx), var(--ty)) scale(1)' }, '100%': { opacity: '0', transform: 'translate(var(--end-tx), var(--end-ty)) scale(0.5)' } }
                    }
                }
            }
        }
    </script>
    <style>
        .smooth-scroll { scroll-behavior: smooth; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #A0AB89; border-radius: 4px; }
        section { scroll-margin-top: 80px; }
        .nav-gradient-mask {
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.2) 60%, rgba(0, 0, 0, 0) 100%);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            -webkit-mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
            mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
        }
        nav a, nav button { position: relative; z-index: 250 !important; }
        .envelope-container { perspective: 1200px; cursor: pointer; position: relative; width: 90vw; max-width: 350px; height: 260px; }
        .envelope-image { position: absolute; width: 100%; height: 100%; border-radius: 8px; box-shadow: 0 30px 60px rgba(0,0,0,0.2); background-image: url('sobre.jpg'); background-size: cover; background-position: center; z-index: 10; transition: transform 1.5s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 1.2s ease; }
        .envelope-letter { position: absolute; width: 92%; height: 90%; left: 4%; top: 5%; text-align: center; padding: 24px; z-index: 5; opacity: 0; transform: scale(0.9) translateY(20px); transition: all 1.8s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.4s ease; background-color: #FBF9F5; box-shadow: inset 0 0 20px rgba(139, 126, 116, 0.15), 0 5px 15px rgba(0,0,0,0.1); background-image: radial-gradient(at 40% 20%, rgba(255,255,255,0.8) 0px, transparent 50%), radial-gradient(at 80% 0%, rgba(255,255,255,0.6) 0px, transparent 50%), radial-gradient(at 0% 50%, rgba(255,255,255,0.7) 0px, transparent 50%), repeating-linear-gradient(transparent, transparent 2px, rgba(0,0,0,0.02) 3px, transparent 3px), repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.02) 3px, transparent 3px); border: 1px solid rgba(139, 126, 116, 0.2); border-radius: 4px 3px 5px 4px / 4px 5px 3px 4px; }
        .envelope-container.open .envelope-image { transform: translateY(200px) scale(0.8) rotateX(-20deg); opacity: 0; pointer-events: none; }
        .envelope-container.open .envelope-letter { opacity: 1; z-index: 20; transform: translateY(-40px) scale(1.1); }
        .wax-seal-trigger { position: absolute; top: 65%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; z-index: 12; }
        .heart-particle { position: absolute; pointer-events: none; z-index: 40; }
        #countdown-box {
            position: sticky; z-index: 210; pointer-events: none;
            background-color: rgba(255, 255, 255, 0.98); display: flex; flex-direction: column; justify-content: center; min-height: 50px;
            will-change: width, border-radius, padding, top, background-color, border-color, box-shadow;
            margin-left: auto; margin-right: auto; overflow: hidden; transition: all 0.3s ease-out;
        }
        #countdown span { display: inline-block; filter: none !important; -webkit-font-smoothing: antialiased; transition: color 0.3s ease, text-shadow 0.3s ease; }
        .count-number { color: #828C6A; -webkit-box-reflect: below -2px linear-gradient(transparent, rgba(0,0,0,0.1)); }
        .count-label { color: #6b7280; }

        #countdown-box.is-transparent {
             background: transparent !important;
             border: none !important;
             box-shadow: none !important;
             pointer-events: none;
             align-items: center !important;
             transform: translateY(-18px) !important; 
        }

        #countdown-box.is-transparent #countdown { gap: 1rem !important; }
        #countdown-box.is-transparent .count-number {
             color: white !important;
             text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0,0,0,0.4);
             font-size: 1rem !important;
             margin: 0;
             line-height: 1;
        }
        #countdown-box.is-transparent .count-label { 
             display: block !important; 
             color: rgba(255, 255, 255, 0.9) !important; 
             font-size: 0.5rem !important; 
             margin-top: -2px;
             text-shadow: 0 1px 4px rgba(0, 0, 0, 0.5);
             font-weight: bold;
        }

        .carousel-item {
             transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease, filter 0.8s ease;
             transform: scale(0.65);
             filter: blur(10px);
             opacity: 0.15;
             z-index: 0;
             margin: 0 -45px;
             pointer-events: none;
             flex-shrink: 0;
            width: 55vw;
             aspect-ratio: 4 / 5;
         }
        .carousel-item img { width: 100%; height: 100%; object-fit: cover; border-radius: 2rem; }
        .carousel-item.active { transform: scale(1.1); filter: blur(0); opacity: 1; z-index: 50; pointer-events: auto; }
        .carousel-item.side-1 { transform: scale(0.85); filter: blur(4px); opacity: 0.5; z-index: 30; }
        .carousel-item.side-2 { transform: scale(0.7); filter: blur(8px); opacity: 0.2; z-index: 10; }
        @media (min-width: 768px) {
             .carousel-item { margin: 0 -80px; width: 32vw; }
             .carousel-item img { border-radius: 3rem; }
        }
        #photo-carousel { display: flex; align-items: center; will-change: transform; cursor: grab; touch-action: pan-y; }
        #photo-carousel.dragging { cursor: grabbing; }
        #photo-carousel.dragging .carousel-item { transition: none !important; }
        
        .section-mask-top {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 120px;
            background: linear-gradient(to bottom, #FBF9F5 0%, rgba(251, 249, 245, 0) 100%);
            z-index: 20; pointer-events: none;
        }
        .section-mask-bottom {
            position: absolute;
            bottom: 0; left: 0;
            width: 100%; height: 250px;
            background: linear-gradient(to top, #FBF9F5 0%, rgba(251, 249, 245, 0) 100%);
            z-index: 20; pointer-events: none;
        }
        .floral-sidebar {
            position: absolute;
            top: 0; bottom: 0;
            width: 700px; 
            background-image: url('Imagen3.jpg');
            background-repeat: repeat-y;
            background-size: 100% auto;
            z-index: 5; pointer-events: none; opacity: 0.18; 
        }
        .left-edge { left: -350px; } 
        .right-edge { right: -350px; transform: scaleX(-1); }
        .polaroid-card {
            background-color: #FFFDF9; 
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='grain'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23grain)' opacity='0.05'/%3E%3C/svg%3E");
            padding: 18px 18px 85px 18px;
            border: 1px solid rgba(0,0,0,0.04);
            position: relative; z-index: 10;
            box-shadow: 10px 20px 40px rgba(61, 54, 48, 0.12);
            width: 100%; max-width: 380px;
            transition: all 0.8s cubic-bezier(0.2, 1, 0.2, 1);
            border-radius: 1px;
        }
        .polaroid-card::before {
            content: '';
            position: absolute;
            top: -20px; left: 50%;
            transform: translateX(-50%) rotate(-3deg);
            width: 130px; height: 45px;
            background-color: rgba(160, 171, 137, 0.35);
            backdrop-filter: blur(2px);
            clip-path: polygon(0% 5%, 100% 0%, 97% 95%, 3% 100%);
            z-index: 20;
        }
        .polaroid-caption {
            position: absolute;
            bottom: 30px; left: 0; right: 0;
            text-align: center;
            font-family: "Great Vibes", cursive;
            color: #828C6A; font-size: 1.9rem;
            line-height: 1.1; padding: 0 15px;
        }
        @keyframes polaroidIn {
            0% { opacity: 0; transform: rotate(var(--start-rot)) translateY(100px) scale(0.8); }
            100% { opacity: 1; transform: rotate(var(--end-rot)) translateY(0) scale(1); }
        }
        .animate-polaroid-in { animation: polaroidIn 1.5s cubic-bezier(0.2, 1, 0.2, 1) forwards; }

        @media (max-width: 768px) {
            .floral-sidebar { width: 400px; } 
            .left-edge { left: -200px; }
            .right-edge { right: -200px; }
            .polaroid-card { max-width: 310px; padding: 12px 12px 75px 12px; }
            .polaroid-caption { font-size: 1.6rem; bottom: 25px; }
        }

        /* Estilos Loader RSVP */
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #828C6A;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop-in { animation: popIn 0.4s cubic-bezier(0.17, 0.89, 0.32, 1.49); }
    </style>
</head>
<body class="font-sans text-wedding-text bg-wedding-bone smooth-scroll antialiased overflow-x-hidden">
    
    <div id="intro-overlay" class="fixed inset-0 z-[110] flex flex-col items-center justify-center bg-wedding-cream transition-opacity duration-[800ms]">
        <div id="envelope-wrapper" class="envelope-container" onclick="openInvitation()">
            <div class="envelope-letter flex flex-col items-center justify-center p-6">
                <h2 class="font-script text-3xl md:text-4xl text-wedding-olive mb-1 leading-none">D & C</h2>
                <div class="flex flex-col items-center my-2">
                    <i data-lucide="heart" class="w-4 h-4 text-wedding-rose fill-wedding-rose mb-1 opacity-80"></i>
                    <p class="text-xl md:text-2xl text-wedding-text font-serif font-bold uppercase tracking-[0.1em] text-center">¬°Nos Casamos!</p>
                </div>
                <div class="w-12 h-[1px] bg-wedding-olive/20 mb-2"></div>
                <p class="font-serif text-sm md:text-base tracking-[0.2em] uppercase text-wedding-text font-semibold">21 . 02 . 2026</p>
            </div>
            <div class="envelope-image"></div>
            <div class="wax-seal-trigger"></div>
        </div>
        <p id="instruccion-abrir" class="mt-16 font-serif text-wedding-text text-sm md:text-base tracking-[0.2em] uppercase animate-pulse font-semibold transition-opacity duration-500">Toca el sobre para abrir</p>
    </div>

    <div id="main-content" class="opacity-0 transition-opacity duration-[2500ms]">
        
        <button id="music-toggle" class="fixed bottom-4 right-4 md:bottom-6 md:right-6 z-[120] bg-white/90 backdrop-blur p-3 md:p-4 rounded-full shadow-2xl border border-wedding-olive/10 text-wedding-olive">
            <i data-lucide="music" class="w-5 h-5"></i>
        </button>
        <audio id="wedding-audio" loop><source src="until_i_found_you.mp3" type="audio/mpeg"></audio>

        <nav class="fixed w-full z-[200] px-6 md:px-10 flex justify-between items-center h-[60px] md:h-[80px] nav-gradient-mask">
            <a href="#" class="font-script text-3xl md:text-4xl text-white leading-none transform -translate-y-1">D & C</a>
            <button id="menu-btn" class="md:hidden text-white p-2 relative z-[260] flex items-center justify-center transform -translate-y-1" onclick="toggleMenu()">
                <i data-lucide="menu" class="w-8 h-8 stroke-[1.5px]"></i>
            </button>
            <div class="hidden md:flex space-x-10 text-[10px] font-serif uppercase tracking-[0.3em] transform -translate-y-1">
                <a href="#ubicacion" class="text-white hover:text-wedding-olive transition">Ubicaci√≥n</a>
                <a href="#vestimenta" class="text-white hover:text-wedding-olive transition">Vestimenta</a>
                <a href="#detalles" class="text-white hover:text-wedding-olive transition">Itinerario</a>
                <a href="#regalos" class="text-white hover:text-wedding-olive transition">Regalos</a>
                <a href="#musica" class="text-white hover:text-wedding-olive transition">M√∫sica</a>
                <a href="#rsvp" class="text-white hover:text-wedding-olive transition">Confirmar</a>
            </div>
        </nav>

        <div id="mobile-menu" class="fixed inset-0 bg-white/30 z-[250] flex flex-col items-center justify-center transition-all duration-500 translate-x-full overflow-hidden" style="backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);">
            <button onclick="toggleMenu()" class="absolute top-6 right-6 text-black">
                <i data-lucide="x" class="w-10 h-10 stroke-[3px]"></i>
            </button>
            <div class="flex flex-col space-y-8 text-center">
                <a href="#ubicacion" onclick="toggleMenu()" class="font-serif text-2xl uppercase tracking-widest text-wedding-text">Ubicaci√≥n</a>
                <a href="#vestimenta" onclick="toggleMenu()" class="font-serif text-2xl uppercase tracking-widest text-wedding-text">Vestimenta</a>
                <a href="#detalles" onclick="toggleMenu()" class="font-serif text-2xl uppercase tracking-widest text-wedding-text">Itinerario</a>
                <a href="#regalos" onclick="toggleMenu()" class="font-serif text-2xl uppercase tracking-widest text-wedding-text">Regalos</a>
                <a href="#musica" onclick="toggleMenu()" class="font-serif text-2xl uppercase tracking-widest text-wedding-text">M√∫sica</a>
                <a href="#rsvp" onclick="toggleMenu()" class="font-serif text-2xl uppercase tracking-widest text-wedding-text">Confirmar</a>
            </div>
            <div class="mt-12"><span class="font-script text-4xl text-wedding-olive">Diego & Carin</span></div>
        </div>

        <header class="relative h-screen flex items-center justify-center text-center overflow-hidden bg-wedding-bone">
            <img src="portada.jpg" alt="Diego & Carin" class="absolute inset-0 w-full h-full object-cover scale-105">
             <div class="absolute inset-0 bg-black/40 z-10"></div>
             <div class="absolute bottom-0 left-0 w-full h-48 bg-gradient-to-t from-wedding-bone to-transparent z-20 pointer-events-none"></div>
             <div class="relative z-30 text-white px-4 text-center">
                 <div id="heart-container" class="absolute inset-0 pointer-events-none"></div>
                 <div id="wedding-title-container" class="opacity-0 text-center select-none" style="will-change: transform, opacity; transform-origin: center center; white-space: nowrap; backface-visibility: hidden;">
                     <h1 class="font-script text-6xl md:text-[10rem] mb-4 md:mb-6 text-wedding-rose drop-shadow-2xl">Diego & Carin</h1>
                     <p class="font-serif text-lg md:text-3xl tracking-[0.2em] font-bold text-white uppercase">21 . 02 . 2026</p>
                 </div>
             </div>
        </header>

        <section class="pt-16 pb-4 bg-wedding-bone text-center px-6 relative z-10">
             <div class="max-w-4xl mx-auto">
                 <i data-lucide="quote" class="w-8 h-8 md:w-10 md:h-10 text-wedding-olive/20 mx-auto mb-6"></i>
                 <h2 class="font-serif text-xl md:text-4xl italic text-wedding-text leading-relaxed">La muchas aguas no apagaran el amor, ni lo ahogaran los r√≠os..."</h2>
                 <p class="mt-6 md:mt-8 font-sans text-[9px] md:text-[10px] uppercase tracking-[0.4em] text-wedding-olive font-semibold">- Cantar de los cantares 8:7</p>
             </div>
         </section>

        <section id="sesion-fotos" class="relative py-24 md:py-48 bg-wedding-bone overflow-hidden flex flex-col items-center">
            <div class="section-mask-top"></div>
            <div class="floral-sidebar left-edge"></div>
            <div class="floral-sidebar right-edge"></div>

            <div class="max-w-3xl w-full flex flex-col items-center space-y-48 md:space-y-64 relative z-10 px-6 pb-20">
                <div class="polaroid-item opacity-0 polaroid-card self-center md:ml-[-30%]" style="--start-rot: -10deg; --end-rot: -2deg;">
                    <img src="imagen_b1.jpg" class="aspect-square object-cover">
                    <div class="polaroid-caption">"El amor nunca se da por vencido"</div>
                </div>
                <div class="polaroid-item opacity-0 polaroid-card self-center md:mr-[-30%]" style="--start-rot: 8deg; --end-rot: 3deg;">
                    <img src="imagen_b2.jpg" class="aspect-square object-cover">
                    <div class="polaroid-caption">"jam√°s pierde la fe"</div>
                </div>
                <div class="polaroid-item opacity-0 polaroid-card self-center" style="--start-rot: -5deg; --end-rot: -1deg;">
                    <img src="imagen_b3.jpg" class="aspect-square object-cover">
                    <div class="polaroid-caption">"siempre tiene esperanzas"</div>
                </div>
                <div class="polaroid-item opacity-0 polaroid-card self-center md:ml-[-25%]" style="--start-rot: 9deg; --end-rot: 4deg;">
                    <img src="imagen_b4.jpg" class="aspect-square object-cover">
                    <div class="polaroid-caption">"y se mantiene firme"</div>
                </div>
                <div class="polaroid-item opacity-0 polaroid-card self-center md:mr-[-25%]" style="--start-rot: -6deg; --end-rot: -3deg;">
                    <img src="imagen_b5.jpg" class="aspect-square object-cover">
                    <div class="polaroid-caption">"en toda circunstancia"</div>
                </div>
                
                <div class="polaroid-item opacity-0 text-center mt-[-40px] md:mt-[-80px] select-none">
                    <p class="font-script text-4xl md:text-6xl text-wedding-olive drop-shadow-sm">
                        1 Corintios 13:7
                    </p>
                </div>
            </div>
            <div class="section-mask-bottom"></div>
        </section>

        <section class="pt-4 pb-16 bg-wedding-bone text-center px-6 relative z-10">
            <div class="max-w-4xl mx-auto flex flex-col items-center">
                <p class="font-serif text-sm md:text-xl text-wedding-earth uppercase tracking-[0.2em] mb-8 md:mb-12">Queremos que seas parte de este d√≠a especial</p>
                <div class="inline-flex flex-col items-center">
                    <span class="font-script text-6xl md:text-[9rem] text-wedding-olive leading-none w-full text-center">Guarda el d√≠a</span>
                    <div class="flex items-center justify-center -mt-2 md:-mt-6">
                        <span class="font-script text-[5rem] md:text-[8rem] text-wedding-olive leading-none select-none transform -translate-y-1 opacity-90">21</span>
                        <div class="flex flex-col items-start ml-3 md:ml-5 border-l border-wedding-olive/20 pl-4 md:pl-6 text-left py-1">
                            <span class="font-serif text-xl md:text-4xl text-wedding-text tracking-widest uppercase leading-tight">de Febrero</span>
                            <span class="font-script text-4xl md:text-7xl text-wedding-olive -mt-1 md:-mt-4">2026</span>
                        </div>
                    </div>
                </div>
                <div class="mt-10 md:mt-14">
                    <a href="https://www.google.com/calendar/render?action=TEMPLATE&text=Matrimonio%20Diego%20%26%20Carin&dates=20260221T210000Z%2F20260222T020000Z&details=%C2%A1Acomp%C3%A1%C3%B1anos%20a%20celebrar%20nuestro%20gran%20d%C3%ADa!&location=Parcelas%20Valle%20El%20Cristo%2C%20Parcela%2030%2C%20La%20Gonzalina%2C%20Rancagua&sf=true&output=xml"
                        target="_blank"
                        class="inline-flex items-center px-8 py-4 border border-wedding-olive text-wedding-olive font-serif uppercase tracking-[0.2em] text-[10px] md:text-xs rounded-full hover:bg-wedding-olive hover:text-white transition-all duration-300 shadow-sm hover:shadow-lg pointer-events-auto">
                        <i data-lucide="calendar" class="w-4 h-4 mr-2"></i>
                        Agenda el d√≠a en tu calendario
                    </a>
                </div>
            </div>
        </section>

        <div id="sticky-master-container" class="relative bg-wedding-bone">
            <div class="absolute top-0 left-0 w-full h-[100vh] overflow-hidden">
                 <img src="Imagen2.jpg" alt="Fondo" class="w-full h-full object-cover" style="object-position: 80% 25%;">
                 <div class="absolute inset-0 bg-black/15"></div>
                 <div class="absolute top-0 left-0 w-full h-48 bg-gradient-to-b from-wedding-bone to-transparent z-[5] pointer-events-none"></div>
                 <div class="absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-wedding-bone to-transparent z-[5] pointer-events-none"></div>
            </div>

            <div id="initial-spacer" class="h-[40vh] pointer-events-none"></div>

            <div id="countdown-box" class="p-6 md:p-12 rounded-[2.5rem] md:rounded-[3.5rem] border border-wedding-olive/10 text-center w-[92%] md:w-[60%] shadow-2xl mx-auto bg-white/98 sticky z-[210]">
                <p id="countdown-title" class="font-serif text-wedding-earth italic mb-4 md:mb-6 text-lg md:text-2xl text-center transition-all duration-300">Falta poco para el gran d√≠a</p>
                <div id="countdown" class="flex justify-center gap-4 md:gap-16 transition-all duration-300 transform -translate-y-1"></div>
            </div>

            <div class="h-[60vh] pointer-events-none"></div>

            <div class="relative z-10 bg-wedding-bone">
                <section id="ubicacion" class="pt-4 pb-20 md:pt-6 md:pb-32 bg-wedding-cream/10 px-4 md:px-6 text-center">
                    <div class="flex items-center justify-center gap-3 mb-10 md:mb-12">
                        <div class="animate-bounce">
                            <i data-lucide="map-pin" class="w-8 h-8 md:w-10 md:h-10 text-wedding-olive"></i>
                        </div>
                        <span class="font-script text-5xl md:text-6xl text-wedding-sage">Ubicaci√≥n</span>
                    </div>
                     <div class="max-w-5xl mx-auto bg-white p-4 md:p-5 rounded-[2.5rem] md:rounded-[3.5rem] shadow-2xl border border-white text-center">
                         <div class="h-64 md:h-96 w-full rounded-[1.5rem] md:rounded-[2.5rem] overflow-hidden mb-8 md:mb-10">
                             <iframe width="100%" height="100%" frameborder="0" scrolling="no" src="https://maps.google.com/maps?q=Parcela%2030%2C%20La%20Gonzalina%2C%20Rancagua&t=&z=15&ie=UTF8&iwloc=&output=embed"></iframe>
                         </div>
                         <h3 class="font-serif text-xl md:text-2xl mb-2 text-wedding-text font-bold">Parcelas Valle El Cristo, Parcela 30</h3>
                         <p class="text-wedding-earth text-xs md:text-sm mb-8 md:mb-10 italic">La Gonzalina, Rancagua</p>
                         <a href="https://maps.google.com/?q=Parcelas+Valle+El+Cristo,+Parcela+30,+La+Gonzalina,+Rancagua" target="_blank" class="inline-flex items-center bg-wedding-olive text-white px-8 md:px-12 py-4 md:py-5 rounded-full text-[9px] md:text-[10px] uppercase tracking-[0.3em] shadow-xl"><i data-lucide="navigation" class="w-4 h-4 mr-2"></i> Abrir GPS</a>
                     </div>
                 </section>

                <section id="vestimenta" class="py-16 md:py-28 bg-wedding-bone text-center relative z-10">
                    <div class="w-full px-2">
                        <span class="font-script text-5xl md:text-7xl text-wedding-sage block mb-2">C√≥digo de Vestimenta</span>
                        <h3 class="font-serif text-xl md:text-2xl text-wedding-text uppercase tracking-[0.1em] mb-12">Formal Elegante</h3>
                
                        <div class="flex flex-row flex-nowrap items-center justify-center gap-2 md:gap-4 max-w-6xl mx-auto">
                            
                            <div class="flex-1 md:flex-none text-center md:max-w-[320px]">
                                <h4 class="font-serif text-xl md:text-3xl text-wedding-olive font-bold uppercase tracking-normal border-b border-wedding-olive/10 pb-1 mb-3 inline-block">Var√≥n</h4>
                                <div class="font-sans text-xs md:text-lg text-wedding-text leading-tight md:leading-relaxed">
                                    <p class="font-bold">Traje formal</p>
                                    <p class="text-wedding-earth italic text-[10px] md:text-sm mb-4">Corbata o humita (opcional)</p>
                                    
                                    <div class="inline-block text-left pl-6 md:pl-12">
                                        <p class="uppercase text-[9px] md:text-[11px] font-bold tracking-widest text-wedding-olive/70 mb-2">Evitar:</p>
                                        <ul class="text-[10px] md:text-sm text-wedding-earth space-y-1 list-none">
                                            <li>‚Ä¢ Jeans</li>
                                            <li>‚Ä¢ Camisas le√±adoras</li>
                                            <li>‚Ä¢ Poleras</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                
                            <div class="flex-shrink-0">
                                <div class="relative inline-block group">
                                    <div class="absolute inset-0 bg-wedding-cream/30 rounded-full scale-110 blur-xl opacity-40"></div>
                                    <img src="vestuario.jpg" alt="Referencia" class="relative z-10 w-32 md:w-[34rem] mx-auto drop-shadow-xl transform transition-transform duration-500 hover:scale-105">
                                </div>
                            </div>
                
                            <div class="flex-1 md:flex-none text-center md:max-w-[320px]">
                                <h4 class="font-serif text-xl md:text-3xl text-wedding-olive font-bold uppercase tracking-normal border-b border-wedding-olive/10 pb-1 mb-3 inline-block">Dama</h4>
                                <div class="font-sans text-xs md:text-lg text-wedding-text leading-tight md:leading-relaxed">
                                    <p class="font-bold">Vestido de gala</p>
                                    <p class="text-wedding-earth italic text-[10px] md:text-sm mb-4">Largo o midi</p>
                                    
                                    <div class="inline-block text-left pl-6 md:pl-12">
                                        <p class="uppercase text-[9px] md:text-[11px] font-bold tracking-widest text-wedding-olive/70 mb-2">Evitar:</p>
                                        <ul class="text-[10px] md:text-sm text-wedding-earth space-y-1 list-none">
                                            <li>‚Ä¢ Tonos claros</li>
                                            <li>‚Ä¢ Blanco exclusivo de la novia</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                
                        <div class="mt-12 p-5 border border-wedding-olive/10 rounded-[2rem] bg-white/40 max-w-sm md:max-w-lg mx-auto">
                            <p class="font-serif text-sm md:text-lg text-wedding-text italic leading-relaxed">
                                "La celebraci√≥n ser√° al aire libre, recomendamos calzado adecuado para la ocasi√≥n."
                            </p>
                        </div>
                    </div>
                </section>

                <section id="detalles" class="py-12 md:py-20 bg-wedding-bone overflow-hidden">
                    <span class="font-script text-5xl md:text-6xl text-wedding-sage text-center w-full block mb-12 md:mb-16">Itinerario</span>
                    <div class="max-w-5xl mx-auto relative px-4">
                        <div class="absolute left-1/2 top-0 bottom-0 w-[2px] bg-wedding-olive/40 -translate-x-1/2"></div>
                        <div class="space-y-12 md:space-y-20 relative">
                            <div class="itinerary-item opacity-0 translate-x-20 scale-95 transition-all duration-1000 ease-out flex items-center w-full">
                                <div class="flex-1"></div>
                                <div class="relative flex justify-center items-center w-10 z-10">
                                    <div class="w-3 h-3 md:w-4 md:h-4 bg-wedding-rose rounded-full ring-[4px] ring-white"></div>
                                    <div class="absolute left-full w-6 md:w-10 h-[2px] bg-wedding-olive/40"></div>
                                </div>
                                <div class="flex-1 pl-8 md:pl-12 text-left">
                                    <span class="font-serif text-wedding-olive font-bold text-lg md:text-2xl block">18:00</span>
                                    <h3 class="font-serif text-xl md:text-4xl text-wedding-text">Llegada de invitados</h3>
                                </div>
                            </div>
                            <div class="itinerary-item opacity-0 -translate-x-20 scale-95 transition-all duration-1000 ease-out flex items-center w-full">
                                <div class="flex-1 pr-8 md:pr-12 text-right">
                                    <span class="font-serif text-wedding-olive font-bold text-lg md:text-2xl block">18:30</span>
                                    <h3 class="font-serif text-xl md:text-4xl text-wedding-text">Ceremonia Religiosa</h3>
                                </div>
                                <div class="relative flex justify-center items-center w-10 z-10">
                                    <div class="absolute right-full w-6 md:w-10 h-[2px] bg-wedding-olive/40"></div>
                                    <div class="w-3 h-3 md:w-4 md:h-4 bg-wedding-rose rounded-full ring-[4px] ring-white"></div>
                                </div>
                                <div class="flex-1"></div>
                            </div>
                            <div class="itinerary-item opacity-0 translate-x-20 scale-95 transition-all duration-1000 ease-out flex items-center w-full">
                                <div class="flex-1"></div>
                                <div class="relative flex justify-center items-center w-10 z-10">
                                    <div class="w-3 h-3 md:w-4 md:h-4 bg-wedding-rose rounded-full ring-[4px] ring-white"></div>
                                    <div class="absolute left-full w-6 md:w-10 h-[2px] bg-wedding-olive/40"></div>
                                </div>
                                <div class="flex-1 pl-8 md:pl-12 text-left">
                                    <span class="font-serif text-wedding-olive font-bold text-lg md:text-2xl block">19:30</span>
                                    <h3 class="font-serif text-xl md:text-4xl text-wedding-text">Coctel</h3>
                                </div>
                            </div>
                            <div class="itinerary-item opacity-0 -translate-x-20 scale-95 transition-all duration-1000 ease-out flex items-center w-full">
                                <div class="flex-1 pr-8 md:pr-12 text-right">
                                    <span class="font-serif text-wedding-olive font-bold text-lg md:text-2xl block">20:30</span>
                                    <h3 class="font-serif text-xl md:text-4xl text-wedding-text">Invitaci√≥n a la cena</h3>
                                </div>
                                <div class="relative flex justify-center items-center w-10 z-10">
                                    <div class="absolute right-full w-6 md:w-10 h-[2px] bg-wedding-olive/40"></div>
                                    <div class="w-3 h-3 md:w-4 md:h-4 bg-wedding-rose rounded-full ring-[4px] ring-white"></div>
                                </div>
                                <div class="flex-1"></div>
                            </div>
                            <div class="itinerary-item opacity-0 translate-x-20 scale-95 transition-all duration-1000 ease-out flex items-center w-full">
                                <div class="flex-1"></div>
                                <div class="relative flex justify-center items-center w-10 z-10">
                                    <div class="w-3 h-3 md:w-4 md:h-4 bg-wedding-rose rounded-full ring-[4px] ring-white"></div>
                                    <div class="absolute left-full w-6 md:w-10 h-[2px] bg-wedding-olive/40"></div>
                                </div>
                                <div class="flex-1 pl-8 md:pl-12 text-left">
                                    <span class="font-serif text-wedding-olive font-bold text-lg md:text-2xl block">20:45</span>
                                    <h3 class="font-serif text-xl md:text-4xl text-wedding-text">Vals de los novios</h3>
                                </div>
                            </div>
                            <div class="itinerary-item opacity-0 -translate-x-20 scale-95 transition-all duration-1000 ease-out flex items-center w-full">
                                <div class="flex-1 pr-8 md:pr-12 text-right">
                                    <span class="font-serif text-wedding-olive font-bold text-lg md:text-2xl block">21:15</span>
                                    <h3 class="font-serif text-xl md:text-4xl text-wedding-text">Cena</h3>
                                </div>
                                <div class="relative flex justify-center items-center w-10 z-10">
                                    <div class="absolute right-full w-6 md:w-10 h-[2px] bg-wedding-olive/40"></div>
                                    <div class="w-3 h-3 md:w-4 md:h-4 bg-wedding-rose rounded-full ring-[4px] ring-white"></div>
                                </div>
                                <div class="flex-1"></div>
                            </div>
                            <div class="itinerary-item opacity-0 translate-x-20 scale-95 transition-all duration-1000 ease-out flex items-center w-full">
                                <div class="flex-1"></div>
                                <div class="relative flex justify-center items-center w-10 z-10">
                                    <div class="w-3 h-3 md:w-4 md:h-4 bg-wedding-rose rounded-full ring-[4px] ring-white"></div>
                                    <div class="absolute left-full w-6 md:w-10 h-[2px] bg-wedding-olive/40"></div>
                                </div>
                                <div class="flex-1 pl-8 md:pl-12 text-left">
                                    <span class="font-serif text-wedding-olive font-bold text-lg md:text-2xl block">23:00</span>
                                    <h3 class="font-serif text-xl md:text-4xl text-wedding-text">Fiesta</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="regalos" class="py-24 md:py-32 bg-wedding-bone relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-full opacity-5 pointer-events-none select-none overflow-hidden">
                        <i data-lucide="heart" class="absolute -top-10 -left-10 w-64 h-64 text-wedding-olive rotate-12"></i>
                        <i data-lucide="gift" class="absolute -bottom-20 -right-20 w-96 h-96 text-wedding-sage -rotate-12"></i>
                    </div>
                    <div class="max-w-6xl mx-auto px-6 relative z-10">
                        <div class="text-center mb-16 md:mb-20">
                            <div class="inline-block p-3 rounded-full bg-wedding-olive/5 mb-6">
                                <i data-lucide="sparkles" class="w-8 h-8 text-wedding-olive animate-pulse"></i>
                            </div>
                            <span class="font-script text-6xl md:text-7xl text-wedding-sage block mb-6">Mesa de Regalos</span>
                            <div class="max-w-2xl mx-auto">
                                <p class="font-serif text-xl md:text-2xl text-wedding-text italic leading-relaxed mb-4">
                                    "Lo m√°s importante para nosotros es compartir este d√≠a con ustedes."
                                </p>
                                <p class="font-serif text-lg md:text-xl text-wedding-text italic leading-relaxed mb-4">
                                    Pero si desean hacernos un regalo, pueden realizar un aporte a trav√©s de las siguientes opciones.
                                </p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8">
                            <div class="gift-card opacity-0 translate-y-10 transition-all duration-1000 bg-white/60 backdrop-blur-md p-8 rounded-[3rem] border border-white shadow-sm hover:shadow-2xl hover:-translate-y-3 group text-center">
                                <div class="w-20 h-20 bg-wedding-cream rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-500 shadow-inner">
                                    <span class="text-4xl">üíÜ‚Äç‚ôÄÔ∏è</span>
                                </div>
                                <h3 class="font-serif text-xl text-wedding-text font-bold mb-2">D√≠a de SPA</h3>
                                <p class="text-wedding-olive font-bold text-2xl mb-6">$40.000</p>
                                <a href="https://mpago.la/346nPmw" target="_blank" class="block w-full py-4 rounded-2xl bg-wedding-olive text-white text-[10px] uppercase tracking-[0.2em] font-bold shadow-lg shadow-wedding-olive/20 hover:bg-wedding-sage transition-colors">Regalar</a>
                            </div>
                            <div class="gift-card opacity-0 translate-y-10 transition-all duration-1000 delay-100 bg-white/60 backdrop-blur-md p-8 rounded-[3rem] border border-white shadow-sm hover:shadow-2xl hover:-translate-y-3 group text-center">
                                <div class="w-20 h-20 bg-wedding-cream rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-500 shadow-inner">
                                    <span class="text-4xl">üç∑</span>
                                </div>
                                <h3 class="font-serif text-xl text-wedding-text font-bold mb-2">Cena Rom√°ntica</h3>
                                <p class="text-wedding-olive font-bold text-2xl mb-6">$70.000</p>
                                <a href="https://mpago.la/1GmMMz5" target="_blank" class="block w-full py-4 rounded-2xl bg-wedding-olive text-white text-[10px] uppercase tracking-[0.2em] font-bold shadow-lg shadow-wedding-olive/20 hover:bg-wedding-sage transition-colors">Regalar</a>
                            </div>
                            <div class="gift-card opacity-0 translate-y-10 transition-all duration-1000 delay-200 bg-white/60 backdrop-blur-md p-8 rounded-[3rem] border border-white shadow-sm hover:shadow-2xl hover:-translate-y-3 group text-center">
                                <div class="w-20 h-20 bg-wedding-cream rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-500 shadow-inner">
                                    <span class="text-4xl">‚úàÔ∏è</span>
                                </div>
                                <h3 class="font-serif text-xl text-wedding-text font-bold mb-2">Luna de Miel</h3>
                                <p class="text-wedding-olive font-bold text-2xl mb-6">$100.000</p>
                                <a href="https://mpago.la/1dhRoFt" target="_blank" class="block w-full py-4 rounded-2xl bg-wedding-olive text-white text-[10px] uppercase tracking-[0.2em] font-bold shadow-lg shadow-wedding-olive/20 hover:bg-wedding-sage transition-colors">Regalar</a>
                            </div>
                            <div class="gift-card opacity-0 translate-y-10 transition-all duration-1000 delay-300 bg-white/60 backdrop-blur-md p-8 rounded-[3rem] border border-white shadow-sm hover:shadow-2xl hover:-translate-y-3 group text-center">
                                <div class="w-20 h-20 bg-wedding-cream rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-500 shadow-inner">
                                    <span class="text-4xl">üéÅ</span>
                                </div>
                                <h3 class="font-serif text-xl text-wedding-text font-bold mb-2">Monto Libre</h3>
                                <p class="text-wedding-olive font-bold text-2xl mb-6">A elecci√≥n</p>
                                <a href="https://link.mercadopago.cl/cydboda" target="_blank" class="block w-full py-4 rounded-2xl bg-wedding-olive text-white text-[10px] uppercase tracking-[0.2em] font-bold shadow-lg shadow-wedding-olive/20 hover:bg-wedding-sage transition-colors">Regalar</a>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="py-12 bg-wedding-bone overflow-hidden relative z-10">
                     <span class="font-script text-5xl md:text-6xl text-wedding-sage text-center w-full block mb-12 md:mb-16">Un poco de nosotros...</span>
                     <div class="w-full flex justify-start items-center h-[450px] md:h-[600px] overflow-visible">
                         <div id="photo-carousel">
                             <div class="carousel-item"><img src="Imagen4.jpg" alt="1"></div>
                             <div class="carousel-item"><img src="Imagen5.jpg" alt="2"></div>
                             <div class="carousel-item"><img src="Imagen6.jpg" alt="3"></div>
                             <div class="carousel-item"><img src="Imagen7.jpg" alt="4"></div>
                             <div class="carousel-item"><img src="Imagen8.jpg" alt="5"></div>
                             <div class="carousel-item"><img src="Imagen9.jpg" alt="6"></div>
                             <div class="carousel-item"><img src="Imagen10.jpg" alt="7"></div>
                             <div class="carousel-item"><img src="Imagen11.jpg" alt="8"></div>
                             <div class="carousel-item"><img src="Imagen12.jpg" alt="9"></div>
                             <div class="carousel-item"><img src="Imagen13.jpg" alt="10"></div>
                             <div class="carousel-item"><img src="Imagen14.jpg" alt="11"></div>
                             <div class="carousel-item"><img src="Imagen15.jpg" alt="12"></div>
                             <div class="carousel-item"><img src="Imagen16.jpg" alt="13"></div>
                             <div class="carousel-item"><img src="Imagen17.jpg" alt="14"></div>
                             <div class="carousel-item"><img src="Imagen18.jpg" alt="15"></div>
                             <div class="carousel-item"><img src="Imagen19.jpg" alt="16"></div>
                         </div>
                     </div>
                 </section>

                <section id="musica" class="py-24 bg-wedding-bone text-center px-6">
                    <div class="max-w-4xl mx-auto flex flex-col items-center">
                        <div class="mb-10">
                            <span class="inline-block p-4 rounded-full bg-wedding-soft-coral/20 mb-4 animate-fade-up">
                                <i data-lucide="youtube" class="w-10 h-10 text-wedding-soft-coral"></i>
                            </span>
                            <h2 class="font-script text-6xl md:text-7xl text-wedding-text block animate-fade-up">
                                Playlist Colaborativa
                            </h2>
                        </div>
                        <p class="font-serif text-lg md:text-xl italic mb-12 max-w-2xl opacity-70 animate-fade-up">
                            ¬°Queremos bailar tus canciones favoritas!<br>
                            A√±ade tus temas preferidos a nuestra lista de YouTube Music.
                        </p>
                        <div class="mb-12 animate-fade-up">
                            <div class="vinyl-record animate-spin-slow mx-auto flex items-center justify-center" 
                                 style="width: 180px; height: 180px; background: radial-gradient(circle, #333 0%, #111 30%, #000 100%); border-radius: 50%; border: 2px solid #222; position: relative;">
                                <div class="vinyl-label" 
                                     style="width: 70px; height: 70px; background-color: #DFA8A4; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; font-family: 'Great Vibes', cursive; z-index: 2; border: 2px solid rgba(0,0,0,0.1);">
                                    <span style="font-size: 1rem; line-height: 1;">D & C</span>
                                    <div style="width: 8px; height: 8px; background: #111; border-radius: 50%; margin: 4px 0; border: 1px solid rgba(255,255,255,0.2);"></div>
                                    <span style="font-size: 0.5rem; letter-spacing: 0.1em; text-transform: uppercase; font-family: 'Montserrat', sans-serif; font-weight: bold;">
                                        2026
                                    </span>
                                </div>
                            </div>
                        </div>
                        <a href="https://music.youtube.com/playlist?list=PLubgL9Zxh3IFlD8CJpPngJRUrb3481wba&si=CvhOtEqfVA3qQdnp" 
                           target="_blank" 
                           class="group relative inline-flex items-center justify-center bg-wedding-soft-coral text-white px-12 py-6 rounded-full text-sm font-bold uppercase tracking-[0.2em] shadow-xl hover:scale-105 transition-all animate-fade-up hover:bg-wedding-coral">
                            <i data-lucide="music-2" class="w-6 h-6 mr-3"></i> 
                            Abrir YouTube Music
                        </a>
                    </div>
                </section>

                <section id="rsvp" class="py-20 md:py-32 bg-wedding-bone text-center px-6 relative z-10">
                    <div class="max-w-2xl mx-auto" id="rsvp-container">
                        <div class="mb-12">
                            <i data-lucide="mail-check" class="w-10 h-10 text-wedding-olive/30 mx-auto mb-4"></i>
                            <span class="font-script text-5xl md:text-6xl text-wedding-olive block">R.S.V.P.</span>
                            <p class="font-serif text-wedding-earth italic mt-4 text-lg">Confirma tu asistencia por favor</p>
                        </div>

                        <form id="rsvp-form" class="bg-white p-8 md:p-12 rounded-[2.5rem] md:rounded-[4rem] shadow-2xl border border-wedding-cream text-left relative overflow-hidden transition-all duration-500">
                            <div class="space-y-8 relative z-10">
                                <div>
                                    <label class="block font-serif text-xs uppercase tracking-widest mb-2 ml-1">Nombre y Apellido</label>
                                    <input type="text" name="nombre_principal" required 
                                        class="w-full border-b border-stone-200 py-3 outline-none focus:border-wedding-olive bg-transparent text-lg font-serif transition-colors"
                                        placeholder="Tu nombre completo">
                                </div>

                                <div>
                                    <label class="block font-serif text-xs uppercase tracking-widest mb-4 ml-1">¬øAsistir√°s?</label>
                                    <div class="grid grid-cols-2 gap-4">
                                        <label class="flex items-center justify-center p-4 border border-stone-100 rounded-2xl cursor-pointer hover:bg-wedding-olive/5 transition-all">
                                            <input type="radio" name="asistencia" value="si" required class="hidden peer" onchange="toggleAsistencia(true)">
                                            <div class="w-4 h-4 border border-wedding-olive rounded-full mr-3 peer-checked:bg-wedding-olive transition-all"></div>
                                            <span class="font-serif">S√≠, asistir√©</span>
                                        </label>
                                        <label class="flex items-center justify-center p-4 border border-stone-100 rounded-2xl cursor-pointer hover:bg-wedding-olive/5 transition-all">
                                            <input type="radio" name="asistencia" value="no" class="hidden peer" onchange="toggleAsistencia(false)">
                                            <div class="w-4 h-4 border border-wedding-olive rounded-full mr-3 peer-checked:bg-wedding-olive transition-all"></div>
                                            <span class="font-serif">No podr√©</span>
                                        </label>
                                    </div>
                                </div>

                                <div id="section-si" class="hidden space-y-8 pt-4 border-t border-stone-50">
                                    <div class="flex items-center justify-between p-4 bg-wedding-bone/50 rounded-2xl">
                                        <label class="font-serif italic text-lg text-wedding-text">¬øConfirmas por alguien m√°s?</label>
                                        <input type="checkbox" id="confirmar-mas" class="w-6 h-6 accent-wedding-olive cursor-pointer" onchange="toggleAcompanantes(this.checked)">
                                    </div>
                                    
                                    <div id="wrapper-cantidad" class="hidden animate-fade-in-up">
                                        <label class="block font-serif text-xs uppercase tracking-widest mb-4 ml-1">¬øCu√°ntos adicionales?</label>
                                        <div class="grid grid-cols-4 gap-2">
                                            <button type="button" onclick="generateInputs(1)" class="num-btn py-3 border border-wedding-olive/20 rounded-xl font-serif hover:bg-wedding-olive hover:text-white transition-all">1</button>
                                            <button type="button" onclick="generateInputs(2)" class="num-btn py-3 border border-wedding-olive/20 rounded-xl font-serif hover:bg-wedding-olive hover:text-white transition-all">2</button>
                                            <button type="button" onclick="generateInputs(3)" class="num-btn py-3 border border-wedding-olive/20 rounded-xl font-serif hover:bg-wedding-olive hover:text-white transition-all">3</button>
                                            <button type="button" onclick="generateInputs(4)" class="num-btn py-3 border border-wedding-olive/20 rounded-xl font-serif hover:bg-wedding-olive hover:text-white transition-all">4</button>
                                        </div>
                                        <div id="nombres-adicionales-container" class="mt-6 space-y-4"></div>
                                    </div>
                                </div>

                                <div>
                                    <label class="block font-serif text-xs uppercase tracking-widest mb-2 ml-1">Mensaje para los novios</label>
                                    <textarea name="mensaje" rows="3" class="w-full border-b border-stone-200 py-2 outline-none focus:border-wedding-olive bg-transparent font-serif transition-colors resize-none" placeholder="D√©janos unas palabras..."></textarea>
                                </div>

                                <button type="submit" id="submit-btn" class="w-full bg-wedding-olive text-white py-5 rounded-full font-serif uppercase tracking-widest text-xs shadow-xl flex items-center justify-center gap-2">
                                    <span id="btn-text">Confirmar Asistencia</span>
                                    <div id="btn-loader" class="loader hidden"></div>
                                </button>
                            </div>
                        </form>
                    </div>
                </section>

                <section class="relative h-screen flex flex-col items-center justify-center text-center overflow-hidden bg-wedding-bone">
                    <img src="ImagenFinal.jpg" alt="Diego y Carin" class="absolute inset-0 w-full h-full object-cover z-0 scale-105">
                    <div class="absolute inset-0 bg-black/30 z-10"></div>
                    <div class="absolute top-0 left-0 w-full h-48 bg-gradient-to-b from-wedding-bone to-transparent z-20 pointer-events-none"></div>
                    <div class="relative z-30 px-6 max-w-4xl">
                        <h2 class="font-serif text-2xl md:text-5xl text-white italic leading-relaxed drop-shadow-lg opacity-0 translate-y-10 transition-all duration-1000 itinerary-item">
                            "Gracias por acompa√±arnos en el comienzo de nuestra historia..."
                        </h2>
                    </div>
                    <div class="absolute bottom-1/3 z-30 w-full text-center">
                        <span class="font-script text-6xl md:text-[8rem] text-wedding-rose drop-shadow-2xl block transform hover:scale-105 transition-transform duration-500 select-none">
                            Diego & Carin
                        </span>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <div id="popup-overlay" class="fixed inset-0 z-[500] bg-black/40 backdrop-blur-sm flex items-center justify-center hidden opacity-0 transition-opacity duration-300">
        <div class="bg-white p-8 md:p-12 rounded-[3rem] shadow-2xl text-center max-w-sm mx-4 animate-pop-in">
            <div class="w-20 h-20 bg-wedding-olive/10 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="check-circle" class="w-12 h-12 text-wedding-olive"></i>
            </div>
            <h3 class="font-script text-5xl text-wedding-olive mb-4 leading-tight">Confirmaci√≥n Exitosa</h3>
            <div class="h-2 w-12 bg-wedding-olive/20 mx-auto mb-8 rounded-full"></div>
            <button onclick="closePopup()" class="w-full py-4 bg-wedding-olive text-white rounded-full font-serif uppercase tracking-widest text-[10px] shadow-lg">Cerrar</button>
        </div>
    </div>

    <script>
        lucide.createIcons();
        const scriptURL = 'https://script.google.com/macros/s/AKfycbxaDm1iz9W2OEbR8ewLFtMEKLfxsGjfseh4uvFFaq0d68Xz_1YTRimIZ1G0-dN5Mfop/exec';
        const form = document.getElementById('rsvp-form');
        const btn = document.getElementById('submit-btn');
        const btnText = document.getElementById('btn-text');
        const btnLoader = document.getElementById('btn-loader');
        const popup = document.getElementById('popup-overlay');
        const rsvpContainer = document.getElementById('rsvp-container');
        const audio = document.getElementById('wedding-audio');
        const musicBtn = document.getElementById('music-toggle');
        const countdownBox = document.getElementById('countdown-box');
        const countdownTitle = document.getElementById('countdown-title');
        const countdownContainer = document.getElementById('countdown');
        let isPlaying = false;

        // --- L√ìGICA DE NAVEGACI√ìN Y MEN√ö ---
        function toggleMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('translate-x-full');
            document.body.style.overflow = mobileMenu.classList.contains('translate-x-full') ? 'auto' : 'hidden';
        }

        // --- L√ìGICA DE APERTURA ---
        function openInvitation() {
            const textoInstruccion = document.getElementById('instruccion-abrir');
            const innerLetter = document.querySelector('.envelope-letter');
            const overlay = document.getElementById('intro-overlay');
            const mainContent = document.getElementById('main-content');
            const titleContainer = document.getElementById('wedding-title-container');
            
            if (textoInstruccion) textoInstruccion.remove();
            document.getElementById('envelope-wrapper').classList.add('open');
            audio.play().then(() => { isPlaying = true; updateMusicIcon(); }).catch(e => {});
            
            setTimeout(() => {
                 overlay.classList.add('opacity-0', 'pointer-events-none');
                 mainContent.classList.remove('opacity-0');
             }, 1000);
            
            setTimeout(() => {
                 if(innerLetter) innerLetter.style.opacity = '0';
                 titleContainer.classList.add('animate-grand-entrance');
                 calculateNegativeTop();
                 createHearts();
             }, 1500);
        }

        // --- L√ìGICA RSVP ---
        window.addEventListener('load', () => {
            if (localStorage.getItem('boda_diego_carin_rsvp') === 'confirmado') {
                mostrarMensajeYaConfirmado();
            }
        });

        form.addEventListener('submit', e => {
            e.preventDefault();
            btn.disabled = true;
            btnText.classList.add('hidden');
            btnLoader.classList.remove('hidden');

            fetch(scriptURL, { method: 'POST', body: new FormData(form), mode: 'no-cors' })
                .then(() => {
                    localStorage.setItem('boda_diego_carin_rsvp', 'confirmado');
                    showSuccess();
                    setTimeout(mostrarMensajeYaConfirmado, 1500);
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    alert('Hubo un error al enviar. Intenta de nuevo.');
                })
                .finally(() => {
                    btn.disabled = false;
                    btnText.classList.remove('hidden');
                    btnLoader.classList.add('hidden');
                });
        });

        function mostrarMensajeYaConfirmado() {
            if(!rsvpContainer) return;
            rsvpContainer.innerHTML = `
                <div class="animate-fade-in-up bg-white p-12 md:p-16 rounded-[2.5rem] md:rounded-[4rem] shadow-2xl border border-wedding-olive/10 text-center">
                    <div class="w-24 h-24 bg-wedding-olive/5 rounded-full flex items-center justify-center mx-auto mb-8">
                        <i data-lucide="heart" class="w-12 h-12 text-wedding-olive fill-wedding-olive opacity-30"></i>
                    </div>
                    <h3 class="font-script text-5xl md:text-7xl text-wedding-olive mb-6">¬°Gracias!</h3>
                    <p class="font-serif text-xl md:text-2xl text-wedding-text italic mb-6">Ya has confirmado tu asistencia.</p>
                    <div class="h-[1px] w-20 bg-wedding-olive/20 mx-auto mb-6"></div>
                    <p class="font-serif text-wedding-earth uppercase tracking-[0.3em] text-xs md:text-base font-bold">¬°Te esperamos con ansias!</p>
                </div>
            `;
            lucide.createIcons();
        }

        function showSuccess() {
            popup.classList.remove('hidden');
            setTimeout(() => popup.classList.add('opacity-100'), 10);
            setTimeout(() => closePopup(), 4000);
        }

        function closePopup() {
            popup.classList.remove('opacity-100');
            setTimeout(() => popup.classList.add('hidden'), 300);
        }

        function toggleAsistencia(asiste) {
            const section = document.getElementById('section-si');
            asiste ? section.classList.remove('hidden') : section.classList.add('hidden');
        }

        function toggleAcompanantes(show) {
            const wrapper = document.getElementById('wrapper-cantidad');
            show ? wrapper.classList.remove('hidden') : (wrapper.classList.add('hidden'), document.getElementById('nombres-adicionales-container').innerHTML = '');
        }

        function generateInputs(num) {
            const container = document.getElementById('nombres-adicionales-container');
            container.innerHTML = `<p class="font-serif text-wedding-olive italic text-sm mb-2">Nombres de tus acompa√±antes:</p>`;
            document.querySelectorAll('.num-btn').forEach((b, i) => {
                (i + 1 === num) ? b.classList.add('bg-wedding-olive', 'text-white') : b.classList.remove('bg-wedding-olive', 'text-white');
            });
            for (let i = 1; i <= num; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.name = `acompanante_${i}`;
                input.required = true;
                input.placeholder = `Acompa√±ante ${i}`;
                input.className = "w-full border-b border-stone-200 py-2 outline-none focus:border-wedding-olive bg-transparent font-serif mb-2 transition-all";
                container.appendChild(input);
            }
        }

        // --- L√ìGICA DE INTERSECCI√ìN (ANIMACIONES SCROLL) ---
        document.addEventListener('DOMContentLoaded', () => {
            const observerOptions = { root: null, rootMargin: '0px 0px -100px 0px', threshold: 0.1 };
            const revealCallback = (entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (entry.target.classList.contains('itinerary-item')) {
                            entry.target.classList.remove('opacity-0', 'translate-x-20', '-translate-x-20', 'scale-95', 'translate-y-10');
                            entry.target.classList.add('opacity-100', 'translate-x-0', 'scale-100', 'translate-y-0');
                        } else if (entry.target.classList.contains('gift-card')) {
                            entry.target.classList.remove('opacity-0', 'translate-y-10');
                            entry.target.classList.add('opacity-100', 'translate-y-0');
                        }
                        observer.unobserve(entry.target);
                    }
                });
            };
            const mainObserver = new IntersectionObserver(revealCallback, observerOptions);
            document.querySelectorAll('.itinerary-item, .gift-card').forEach(item => { mainObserver.observe(item); });

            const polaroidObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.remove('opacity-0');
                        if(entry.target.classList.contains('polaroid-card')) {
                            entry.target.classList.add('animate-polaroid-in');
                        } else {
                            entry.target.classList.add('animate-fade-in'); 
                        }
                        polaroidObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.15, rootMargin: "0px 0px -100px 0px" });
            document.querySelectorAll('.polaroid-item').forEach(item => { polaroidObserver.observe(item); });
        });

        // --- L√ìGICA CARRUSEL ---
        const track = document.getElementById('photo-carousel');
        const initialSlides = Array.from(track.children);
        const originalCount = initialSlides.length;
        initialSlides.slice(0, 5).forEach(s => track.appendChild(s.cloneNode(true)));
        initialSlides.slice(-5).reverse().forEach(s => track.insertBefore(s.cloneNode(true), track.firstChild));
        
        let carouselIndex = 5;
        let isDragging = false, startX = 0, currentTranslate = 0, prevTranslate = 0, autoPlayInterval;

        function updateCarousel(transition = true) {
            track.style.transition = transition ? 'transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)' : 'none';
            Array.from(track.children).forEach((s, i) => {
                s.classList.remove('active', 'side-1', 'side-2');
                const diff = i - carouselIndex;
                if (diff === 0) s.classList.add('active');
                else if (Math.abs(diff) === 1) s.classList.add('side-1');
                else if (Math.abs(diff) === 2) s.classList.add('side-2');
            });
            const centerX = window.innerWidth / 2;
            const item = track.children[carouselIndex];
            if(!item) return;
            const itemCenter = item.offsetLeft + (item.offsetWidth / 2);
            currentTranslate = centerX - itemCenter;
            prevTranslate = currentTranslate;
            track.style.transform = `translateX(${currentTranslate}px)`;
        }

        function onDragStart(e) { isDragging = true; startX = e.type.includes('mouse') ? e.pageX : e.touches[0].clientX; clearInterval(autoPlayInterval); track.classList.add('dragging'); }
        function onDragMove(e) { if (!isDragging) return; const x = e.type.includes('mouse') ? e.pageX : e.touches[0].clientX; track.style.transform = `translateX(${prevTranslate + (x - startX)}px)`; }
        function onDragEnd(e) { if (!isDragging) return; isDragging = false; track.classList.remove('dragging'); const endX = e.type.includes('mouse') ? e.pageX : (e.changedTouches ? e.changedTouches[0].clientX : startX); const movedBy = endX - startX; if (movedBy < -70) carouselIndex++; else if (movedBy > 70) carouselIndex--; updateCarousel(true); startAutoPlay(); }

        track.addEventListener('mousedown', onDragStart); track.addEventListener('touchstart', onDragStart, {passive: true});
        window.addEventListener('mousemove', onDragMove); window.addEventListener('touchmove', onDragMove, {passive: true});
        window.addEventListener('mouseup', onDragEnd); window.addEventListener('touchend', onDragEnd);

        track.addEventListener('transitionend', () => {
            if (carouselIndex >= originalCount + 5) { carouselIndex = 5; updateCarousel(false); }
            else if (carouselIndex <= 4) { carouselIndex = originalCount + 4; updateCarousel(false); }
        });

        function startAutoPlay() { clearInterval(autoPlayInterval); autoPlayInterval = setInterval(() => { carouselIndex++; updateCarousel(true); }, 3500); }

        // --- L√ìGICA CUENTA REGRESIVA Y STICKY ---
        window.addEventListener('scroll', () => {
            if (!countdownBox) return;
            const boxRect = countdownBox.getBoundingClientRect();
            const stickyThreshold = parseInt(window.getComputedStyle(countdownBox).top) || 0;
            const distanceToSticky = boxRect.top - stickyThreshold;
            const animationRange = window.innerWidth < 768 ? 180 : 250;
            let progress = Math.min(Math.max(1 - (distanceToSticky / animationRange), 0), 1);
            const startWidth = (window.innerWidth < 768 ? 92 : 60);
            if (progress >= 0.98) {
                countdownBox.classList.add('is-transparent');
                countdownBox.style.width = 'auto'; countdownBox.style.minWidth = '140px'; countdownBox.style.backgroundColor = 'transparent'; countdownBox.style.boxShadow = 'none'; countdownBox.style.borderColor = 'transparent';
            } else {
                countdownBox.classList.remove('is-transparent');
                countdownBox.style.width = `${startWidth + (progress * (100 - startWidth))}%`;
                countdownBox.style.borderRadius = `${(window.innerWidth < 768 ? 2.5 : 3.5) * (1 - progress)}rem`;
                countdownBox.style.backgroundColor = `rgba(255, 255, 255, ${0.98 * (1 - (progress > 0.8 ? (progress-0.8)/0.2 : 0))})`;
                countdownBox.style.boxShadow = `0 25px 50px -12px rgba(0, 0, 0, ${0.25 * (1 - progress)})`;
                countdownBox.style.borderColor = `rgba(130, 140, 106, ${0.1 * (1 - progress)})`;
            }
            if (countdownTitle) countdownTitle.style.opacity = progress >= 0.5 ? 0 : 1 - (progress * 2);
        });

        const targetDate = new Date("Feb 21, 2026 17:00:00").getTime();
        function updateCounter() {
            const now = new Date().getTime();
            const gap = targetDate - now;
            const d = Math.floor(gap / (1000*60*60*24)), h = Math.floor((gap%(1000*60*60*24))/(1000*60*60)), m = Math.floor((gap%(1000*60*60))/(1000*60)), s = Math.floor((gap%(1000*60))/1000);
            if(countdownContainer) countdownContainer.innerHTML = `<div class="flex flex-col items-center"><span class="count-number block font-serif text-xl md:text-3xl font-bold">${d}</span><span class="count-label text-[8px] uppercase font-bold">D√≠as</span></div><div class="flex flex-col items-center"><span class="count-number block font-serif text-xl md:text-3xl font-bold">${h}</span><span class="count-label text-[8px] uppercase font-bold">Hs</span></div><div class="flex flex-col items-center"><span class="count-number block font-serif text-xl md:text-3xl font-bold">${m}</span><span class="count-label text-[8px] uppercase font-bold">Min</span></div><div class="flex flex-col items-center"><span class="count-number block font-serif text-xl md:text-3xl font-bold">${s}</span><span class="count-label text-[8px] uppercase font-bold">Seg</span></div>`;
        }
        setInterval(updateCounter, 1000);

        // --- L√ìGICA M√öSICA ---
        function updateMusicIcon() { musicBtn.innerHTML = isPlaying ? '<i data-lucide="pause" class="w-5 h-5"></i>' : '<i data-lucide="music" class="w-5 h-5"></i>'; lucide.createIcons(); }
        musicBtn.onclick = () => { isPlaying ? audio.pause() : audio.play(); isPlaying = !isPlaying; updateMusicIcon(); };

        // --- PART√çCULAS Y OTROS ---
        function createHearts() {
            const container = document.getElementById('heart-container');
            if (!container) return;
            for(let i=0; i<15; i++) {
                const h = document.createElement('div');
                h.innerHTML = `<svg width="12" height="12" fill="#EFC0BC" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
                h.className = 'heart-particle animate-heart-float';
                const angle = Math.random()*360; const dist = 60 + Math.random()*100;
                h.style.setProperty('--tx', `${Math.cos(angle)*dist*0.4}px`);
                h.style.setProperty('--ty', `${Math.sin(angle)*dist*0.4}px`);
                h.style.setProperty('--end-tx', `${Math.cos(angle)*dist}px`);
                h.style.setProperty('--end-ty', `${Math.sin(angle)*dist}px`);
                h.style.left = '50%'; h.style.top = '50%';
                container.appendChild(h);
            }
        }

        function calculateNegativeTop() {
            if(!countdownTitle || !countdownBox) return;
            const titleHeight = countdownTitle.offsetHeight;
            const titleMargin = parseInt(window.getComputedStyle(countdownTitle).marginBottom);
            countdownBox.style.top = `-${(titleHeight + titleMargin) - 8}px`;
        }

        window.addEventListener('load', () => { setTimeout(() => { updateCarousel(false); startAutoPlay(); }, 800); });
        window.addEventListener('resize', () => { calculateNegativeTop(); updateCarousel(false); });
    </script>
</body>
</html>
